# Development Dockerfile with live reload
FROM node:18-alpine

# Install live-server for development
RUN npm install -g live-server

# Set working directory
WORKDIR /app

# Copy package files
COPY package*.json ./

# Install dependencies
RUN npm install

# Copy source files
COPY . .

# Build initial CSS
RUN npm run tw:build

# Expose port
EXPOSE 3000

# Create startup script
RUN echo '#!/bin/sh' > /start.sh && \
    echo 'npm run tw:watch &' >> /start.sh && \
    echo 'live-server --host=0.0.0.0 --port=3000 --entry-file=index.html src/' >> /start.sh && \
    chmod +x /start.sh

# Start both Tailwind watch and live-server
CMD ["/start.sh"]
